class qvert{static straight_vert2(t,e){if(t.length<2)return console.error("straight_vert2: 形状データは少なくとも2点必要"),t;const r=t.length-1;if(e.length!==r)return console.error("straight_vert2: 分割数配列の長さが不正"),t;const c=e.reduce(((t,e)=>t+e+1),0)-(r-1),n=new Array(c);let l=0;for(let c=0;c<r;c++){const r=t[c],o=t[c+1],s=e[c];for(let t=0;t<=s;t++){if(c>0&&0===t)continue;const e=t/s;n[l++]={x:r.x+(o.x-r.x)*e,y:r.y+(o.y-r.y)*e}}}return n}static beje_vert2(t,e){if(t.length<2)return console.error("beje_allverticesv2: 形状データは少なくとも2点必要"),t;const r=t.length-1;if(e.length!==r)return console.error("beje_allverticesv2: 分割数配列の長さが不正"),t;const c=e.reduce(((t,e)=>t+e+1),0)-(r-1),n=new Array(c);let l=0;for(let c=0;c<r;c++){const r=t[c],o=t[c+1],s=e[c];for(let t=0;t<=s;t++){if(c>0&&0===t)continue;const e=t/s;n[l++]=this.calculateCubicBezierPoint(r,o,e)}}return n}static calculateCubicBezierPoint(t,e,r){const c=1-r,n=c*c*c,l=3*r*c*c,o=3*r*r*c,s=r*r*r;return{x:n*t.x+l*(t.x+(t.ctr2x||0))+o*(e.x+(e.ctr1x||0))+s*e.x,y:n*t.y+l*(t.y+(t.ctr2y||0))+o*(e.y+(e.ctr1y||0))+s*e.y}}static drawControlPoints(t,e){t.push(),t.noStroke();for(let r=0;r<e.length;r++){let c=e[r];t.fill(255,255,255),t.circle(c.x,c.y,15),t.fill(255,0,0),t.circle(c.x+c.ctr1x,c.y+c.ctr1y,15),t.fill(0,0,255),t.circle(c.x+c.ctr2x,c.y+c.ctr2y,15),t.strokeWeight(2),t.stroke(255,0,0),t.line(c.x,c.y,c.x+c.ctr1x,c.y+c.ctr1y),r<e.length-1&&(t.stroke(0,0,255),t.line(c.x,c.y,c.x+c.ctr2x,c.y+c.ctr2y))}t.pop()}static shiftScaleXY(t,e,r,c,n,l){const o=c*Math.PI/180,s=Math.cos(o),i=Math.sin(o);return t.map((t=>{const c=t.x*e,o=t.y*r,y=c*s-o*i,x=c*i+o*s;return{...t,x:y+n,y:x+l}}))}static shiftScaleXYv2(t,e,r,c,n,l){if(0===t.length)return t;let o=t[0].x,s=o,i=t[0].y,y=i;for(let e=1;e<t.length;e++){const r=t[e];r.x<o?o=r.x:r.x>s&&(s=r.x),r.y<i?i=r.y:r.y>y&&(y=r.y)}const x=(o+s)/2,a=(i+y)/2,h=c*Math.PI/180,u=Math.cos(h),f=Math.sin(h),g=1!==e,v=1!==r,M=0!==c;return t.map((t=>{let c=t.x-x,o=t.y-a;if(g&&(c*=e),v&&(o*=r),M){const t=c*f+o*u;c=c*u-o*f,o=t}return{...t,x:c+x+n,y:o+a+l}}))}}